<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema de Hor√°rios - Ifes Campus S√£o Mateus</title>
    
    <link rel="icon" href="https://upload.wikimedia.org/wikipedia/commons/thumb/a/a0/Ifes_Logo.svg/2048px-Ifes_Logo.svg.png" type="image/png">

    <style>
        /* --- Vari√°veis --- */
        :root {
            --ifes-red: #cd191e;
            --ifes-red-dark: #a61015;
            --ifes-green: #2f9e41;
            --text-dark: #333333;
            --bg-light: #f9f9f9;
            --white: #ffffff;
        }

        /* --- Reset --- */
        * { box-sizing: border-box; }

        /* --- Geral --- */
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--bg-light);
            margin: 0;
            padding: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
        }

        /* --- Header --- */
        header {
            width: 100%;
            background: linear-gradient(135deg, var(--ifes-red) 0%, var(--ifes-red-dark) 100%);
            color: var(--white);
            padding: 20px 10px;
            text-align: center;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }

        header h1 { margin: 0; font-size: 1.8rem; font-weight: 600; }
        header p.subtitle { margin: 5px 0 0 0; font-size: 1rem; opacity: 0.9; }
        
        /* Nova classe para a data de atualiza√ß√£o */
        header p.update-info {
            margin-top: 8px;
            font-size: 0.85rem;
            background-color: rgba(255, 255, 255, 0.2);
            display: inline-block;
            padding: 2px 10px;
            border-radius: 12px;
            font-weight: 500;
        }

        /* --- Container Menus --- */
        .controls-container {
            background: var(--white);
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.05);
            border-top: 4px solid var(--ifes-green);
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
            justify-content: center;
            margin-bottom: 20px;
            width: 90%;
            max-width: 1000px;
        }

        .filter-group {
            display: flex;
            flex-direction: column;
            flex: 1;
            min-width: 220px;
        }

        /* Destaque para o semestre */
        .semester-group select {
            border: 2px solid var(--ifes-red);
            font-weight: bold;
            color: var(--text-dark);
        }

        label {
            font-size: 0.9rem;
            margin-bottom: 8px;
            font-weight: bold;
            color: var(--text-dark);
        }

        select {
            padding: 12px;
            border: 1px solid #ccc;
            border-radius: 4px;
            font-size: 1rem;
            width: 100%;
            cursor: pointer;
            background-color: var(--white);
            appearance: none; 
            background-image: url("data:image/svg+xml;charset=US-ASCII,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%22292.4%22%20height%3D%22292.4%22%3E%3Cpath%20fill%3D%22%23333%22%20d%3D%22M287%2069.4a17.6%2017.6%200%200%200-13-5.4H18.4c-5%200-9.3%201.8-12.9%205.4A17.6%2017.6%200%200%200%200%2082.2c0%205%201.8%209.3%205.4%2012.9l128%20127.9c3.6%203.6%207.8%205.4%2012.8%205.4s9.2-1.8%2012.8-5.4L287%2095c3.5-3.5%205.4-7.8%205.4-12.8%200-5-1.9-9.2-5.5-12.8z%22%2F%3E%3C%2Fsvg%3E");
            background-repeat: no-repeat;
            background-position: right 10px top 50%;
            background-size: 12px auto;
        }

        select:focus { outline: none; border-color: var(--ifes-green); }

        /* --- Display Imagem --- */
        .image-display {
            max-width: 1200px;
            width: 95%;
            min-height: 600px;
            background-color: #fff;
            border: 1px solid #ddd;
            display: flex;
            align-items: center;      
            justify-content: center;  
            border-radius: 8px;
            overflow: auto;
            position: relative;
            padding: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
            margin-bottom: 60px;
        }

        .image-display img {
            max-width: 100%;
            height: auto;
            display: block; 
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }

        .error-message {
            color: var(--ifes-red);
            font-size: 1.1rem;
            text-align: center;
            display: none; 
            font-weight: bold;
            padding: 20px;
            border: 2px dashed var(--ifes-red);
            background-color: #fff0f0;
            border-radius: 8px;
            width: 90%;
        }

        /* --- Footer --- */
        footer {
            margin-top: auto;
            width: 100%;
            background-color: var(--text-dark);
            color: var(--white);
            text-align: center;
            padding: 20px 10px;
            font-size: 0.9rem;
            border-top: 4px solid var(--ifes-red);
        }

        footer a { color: var(--ifes-green); text-decoration: none; font-weight: bold; }
        footer a:hover { text-decoration: underline; color: var(--white); }

        /* --- Mobile --- */
        @media (max-width: 768px) {
            .image-display { min-height: 400px; }
        }
        @media (max-width: 480px) {
            .controls-container { flex-direction: column; }
            .image-display { min-height: 300px; }
        }
    </style>
</head>
<body>

    <header>
        <h1>Sistema de Hor√°rios</h1>
        <p class="subtitle">Instituto Federal do Esp√≠rito Santo - Campus S√£o Mateus</p>
        <p class="update-info">üìÖ Atualizado em: <span id="last-updated-date">--/--/----</span></p>
    </header>

    <div class="controls-container">
        <div class="filter-group semester-group">
            <label for="select-semestre">üóìÔ∏è Semestre Letivo</label>
            <select id="select-semestre" class="filter-menu-semestre">
                <option value="2026-1" selected>2026/1 (Atual)</option>
                <option value="2025-2">2025/2 (Anterior)</option>
            </select>
        </div>

        <div class="filter-group">
            <label for="select-turmas">üìÖ Filtrar por Turma</label>
            <select id="select-turmas" class="filter-menu">
                <option value="">Selecione uma Turma...</option>
            </select>
        </div>

        <div class="filter-group">
            <label for="select-professores">üë®‚Äçüè´ Filtrar por Professor</label>
            <select id="select-professores" class="filter-menu">
                <option value="">Selecione um Professor...</option>
            </select>
        </div>

        <div class="filter-group">
            <label for="select-salas">üìç Filtrar por Sala</label>
            <select id="select-salas" class="filter-menu">
                <option value="">Selecione uma Sala...</option>
            </select>
        </div>
    </div>

    <div class="image-display">
        <img id="main-image" src="icones/unnamed.webp" alt="Visualiza√ß√£o">
        <div id="error-msg" class="error-message">
            ‚ö†Ô∏è Erro ao carregar imagem.<br>
            <span style="font-size: 0.9em; font-weight: normal; color: #555;">Verifique se o arquivo existe na pasta do semestre selecionado.</span>
        </div>
    </div>

    <footer>
        Desenvolvido por <a href="https://www.saomateus.ifes.edu.br/institucional-sm/1092-nucleo-de-tecnologias-educacionais-nte" target="_blank">NTE - Ifes Campus S√£o Mateus</a>
    </footer>

    <script>
        const fileExtension = '.jpg'; 
        const defaultImage = 'icones/unnamed.webp';

        // --- BANCO DE DADOS ESTRUTURADO ---
        const database = {
            "2025-2": {
                updatedAt: "02/09/2025",
                turmas: {
                    prefix: "turma_page",
                    list: [
                        "1EIM", "2EIV-A", "2EIV-B", "3EIM", "4EIV", 
                        "1MIM-A", "1MIM-B", "2MIV", "3MIM-A", "3MIM-B", "4MIV", 
                        "1EN", "2EN", "3EN", "4EN", 
                        "1MN", "2MNP", "2MN", "3MN", "4MN", 
                        "2ENGMEC", "4ENGMEC", "6ENGMEC", "8ENGMEC", 
                        "2ENGEL", "4ENGEL", "7ENGEL", "9ENGEL", 
                        "Reuni√µes", "P√≥s-gradua√ß√£o", "DPGGE", "Extra"
                    ]
                },
                professores: {
                    prefix: "Professor_page",
                    list: [
                        "Abra√£o Frossard", "Adriano Nardoto", "Alan Helal", "Alexandre Polizel", "Alo√≠sio Ramos", 
                        "Andr√© Silva", "Antonio J√∫nior", "Ant√¥nio Zancanela", "Arthur Amorim", "Arthur Monteiro", 
                        "Carlos Abreu", "Carolina Ca√±ete", "Cleidson Venturini", "Cristiano Tavares", "Dailson Abreu", 
                        "Daniel Carletti", "Daniela Moura", "Diego Lilargem", "Diego Taborda", "DPPGE", 
                        "Eduardo Caetano", "Fabio Reis", "Fernanda Capucho", "Gilson Lima", "Giuliana Ferrari", 
                        "Gledson Melotti", "Guilherme Genehr", "Harrison Marciano", "Henver Effgen", "Jardel Merlin", 
                        "Jean Rubyo", "Jo√£o Paulo Barbosa", "Jo√£o Victor", "Jos√© Roberto", "Juliana Zach√©", 
                        "Kamilla Malverdi", "Laylla Mello", "Leandro Carvalho", "Leonardo Vieira", "Lucas Pagoto", 
                        "Luiz Rafael", "Manoel Tadeu", "Marcos Christo", "Maur√≠cio Rodrigues", "Michel dos Santos", 
                        "Monique Missagia", "Ney Francisco", "Pablo Missagia", "Patr√≠cia Andrade", "Paulo Victor", 
                        "Petro 1", "Petro 2", "Petro EL 1", "Rayana Barcelos", "Renan Magnol", 
                        "Rivana Zache", "Robson Gobbi", "Roger Rodrigues", "Sandro Massato", "Silvia Louzada", 
                        "Solivan", "Thiago Boldrini", "Thiago Maduro", "Thomaz Rodrigues", "Tiago Zanotelli", 
                        "Walber Ronconi", "Welliton Carvalho", "Werley Facco", "Wilson Ob√©d", "Zamith Fran√ßa"
                    ]
                },
                salas: {
                    prefix: "Sala_page",
                    list: [
                        "Laborat√≥rio de Corrente Alternada", "A6 - Sala de Aula (Bloco A)", "A9 - Sala Multiuso (Bloco A)", 
                        "B1 - Sala de Aula (Bloco B)", "B2 - Sala de Aula (Bloco B)", "B3 - Sala de Aula (Bloco B)", 
                        "B4 - Sala de Aula (Bloco B)", "B5 - Sala de Aula (Bloco B)", "C1 - Audit√≥rio", 
                        "C2 - Sala de Aula (Modulares)", "C3 - Sala de Aula (Modulares)", "C4 - Sala de Aula (Modulares)", 
                        "Lab. Comandos e Automa√ß√£o A5", "Lab. Desenho (G4)", "Lab. Efic. Energ. (B10)", 
                        "Lab. Eletro. (A8)", "Lab. Ensaios (B9)", "Lab. Hidr√°ulica/Pneum√°tica (B6)", 
                        "Lab. Info. 1 (A2)", "Lab. Info. 2 (G5)", "Lab. Inst. El√©tricas (A4)", 
                        "Lab. Manuten√ß√£o (G3)", "Lab. M√°quinas T√©rmicas (B7)", "Lab. Metalografia/Qu√≠mica (B8)", 
                        "Lab. Metro/F√≠sica (G6)", "Lab. Sist. Digitais (A7)", "Lab. Soldagem (G1)", 
                        "Laborat√≥rio de M√°quinas El√©tricas (A3)", "Oficina (Ajustagem) (G2)", "Oficina (Caldeiraria) (G2)", 
                        "Oficina (Torno) (G2)", "Sala de Arte e Cultura", "Sala P√≥s-gradua√ß√£o"
                    ]
                }
            },
            "2026-1": {
                updatedAt: "11/12/2025",
                turmas: {
                    prefix: "Turmas 2026_1_page",
                    list: [
                        "1EIM", "1EIV", "2EIM", "3EIV-A", "3EIV-B", 
                        "1MIM", "1MIV", "2MIM-A", "2MIM-B", "3MIV", 
                        "1ENGEL", "3ENGEL", "5ENGEL", "8ENGEL", 
                        "1ENGMEC", "3ENGMEC", "5ENGMEC", "7ENGMEC", "9ENGMEC", 
                        "1EN", "2EN", "3EN", "4EN", 
                        "1MN", "2MN", "3MN", "3MNP", "4MN", 
                        "DPGGE", "P√≥s-gradua√ß√£o", "Reuni√µes"
                    ]
                },
                professores: {
                    prefix: "Professores 2026_1_page",
                    list: [
                        "Abra√£o Frossard", "Adriano Nardoto", "Alan Helal", "Alexandre Polizel", "Alo√≠sio Ramos", 
                        "Andr√© Silva", "Antonio J√∫nior", "Ant√¥nio Zancanela", "Arthur Amorim", "Arthur Monteiro", 
                        "Carlos Abreu", "Carolina Ca√±ete", "Cleidson Venturini", "Dailson Coelho Abreu", 
                        "Daniel Carletti", "Daniela Moura", "Diego Lilargem", "Diego Taborda", "DPPGE", 
                        "Eduardo Caetano", "Erika", "Fabio Reis", "Fernanda Capucho", "Genesio Moreira Filho", 
                        "Gilson Lima", "Giuliana Ferrari", "Gledson Melotti", "Guilherme A Genehr", 
                        "Harrison Marciano", "Henver Effgen", "Jardel Merlin", "Jean Rubyo", "Jo√£o Paulo Barbosa", 
                        "Jo√£o Victor", "Jos√© Roberto", "Juliana Zach√©", "Kamilla Malverdi", 
                        "Larissa Mota de Souza", "Laylla Mello", "Leandro Carvalho", "Leonardo Vieira", 
                        "Lucas Pagoto", "Luiz Rafael", "Manoel Tadeu", "Marcos Christo", "Maur√≠cio Rodrigues", 
                        "Michel dos Santos", "Ney Francisco", "Patr√≠cia Andrade", "Paulo Victor", 
                        "Petro1", "Petro2", "Rayana Barcelos", "Renan Magnol", "Rivana Zache", 
                        "Robson Gobbi", "Roger Rodrigues", "Sandro Massato", "Silvia Louzada", "Solivan", 
                        "Substituto Eletro", "Thiago Boldrini", "Thiago Maduro", "Thomaz Rodrigues", 
                        "Tiago Zanotelli", "Walber Ronconi", "Welliton Carvalho", "Werley Facco", "Wilson Ob√©d"
                    ]
                },
                salas: {
                    prefix: "Salas 2026_1_page",
                    list: [
                        "A1 - Lab. de Corrente Alternada e Eletr√¥nica de Pot√™ncia", "A6 - Sala de Aula (Bloco A)", 
                        "A9 - Sala Multiuso (Bloco A)", "B1 - Sala de Aula (Bloco B)", "B2 - Sala de Aula (Bloco B)", 
                        "B3 - Sala de Aula (Bloco B)", "B4 - Sala de Aula (Bloco B)", "B5 - Sala de Aula (Bloco B)", 
                        "C1 - Audit√≥rio", "C2 - Sala de Aula (Modulares)", "C3 - Sala de Aula (Modulares)", 
                        "C4 - Sala de Aula (Modulares)", "Lab. Comandos, Controle e Automa√ß√£o A5", 
                        "Lab. Desenho (G4 - Galp√£o)", "Lab. Efic. Energ. (B10 - Bloco B)", 
                        "Lab. Eletro. (A8 - Bloco A)", "Lab. Ensaios (B9 - Bloco B)", 
                        "Lab. Hidr√°ulica/Pneum√°tica (B6 - Bloco B)", "Lab. Info. 1 (A2 - Bloco A)", 
                        "Lab. Info. 2 (G5 - Galp√£o)", "Lab. Inst. El√©tricas (A4 - Bloco A)", 
                        "Lab. Manuten√ß√£o (G3 - Galp√£o)", "Lab. M√°quinas T√©rmicas (B7 - Bloco B)", 
                        "Lab. Metalografia/Qu√≠mica (B8 - Bloco B)", "Lab. Metro/F√≠sica (G6 - Galp√£o)", 
                        "Lab. Sist. Digitais (A7 - Bloco A)", "Lab. Soldagem (G1 - Galp√£o)", 
                        "Lab. de M√°quinas El√©tricas (A3 - Bloco A)", "Oficina (Ajustagem/Caldeiraria) (G2)", 
                        "Oficina (Torno) (G2 - Galp√£o)", "Sala de Arte e Cultura", "Sala P√≥s-gradua√ß√£o"
                    ]
                }
            }
        };

        // --- Elementos DOM ---
        const selectSemestre = document.getElementById('select-semestre');
        const selectTurmas = document.getElementById('select-turmas');
        const selectProfessores = document.getElementById('select-professores');
        const selectSalas = document.getElementById('select-salas');
        const mainImage = document.getElementById('main-image');
        const errorMsg = document.getElementById('error-msg');
        const contentSelects = document.querySelectorAll('.filter-menu');
        const lastUpdatedSpan = document.getElementById('last-updated-date');

        function padNumber(num) {
            return num.toString().padStart(4, '0');
        }

        // Fun√ß√£o para preencher um select
        function populateSelect(selectElement, dataObj, folderName) {
            // Limpa op√ß√µes anteriores
            selectElement.innerHTML = '<option value="">Selecione...</option>';
            
            const list = dataObj.list;
            const prefix = dataObj.prefix;

            list.forEach((name, index) => {
                const option = document.createElement('option');
                option.text = name;
                // Ex: "turmas/Turmas 2026_1_page-0001.jpg"
                const fileNumber = padNumber(index + 1);
                option.value = `${folderName}/${prefix}-` + fileNumber + fileExtension;
                selectElement.add(option);
            });
        }

        // Fun√ß√£o Principal: Atualiza todos os menus baseado no semestre
        function updateMenus(semesterKey) {
            const data = database[semesterKey];
            
            if (data) {
                // Atualiza a data no cabe√ßalho
                lastUpdatedSpan.textContent = data.updatedAt;

                // Popula os menus
                populateSelect(selectTurmas, data.turmas, "turmas");
                populateSelect(selectProfessores, data.professores, "professores");
                populateSelect(selectSalas, data.salas, "salas");
            } else {
                console.error("Dados n√£o encontrados para o semestre: " + semesterKey);
                lastUpdatedSpan.textContent = "--/--/----";
            }
            
            // Reseta a imagem ao trocar de semestre
            resetDisplay();
        }

        // L√≥gica de Sele√ß√£o de Imagem
        function handleSelection(event) {
            const selectedSelect = event.target;
            const partialPath = selectedSelect.value;
            const currentSemester = selectSemestre.value; 

            if (!partialPath) {
                resetDisplay();
                return;
            }

            // Reseta outros menus para evitar confus√£o
            contentSelects.forEach(select => {
                if (select !== selectedSelect) {
                    select.selectedIndex = 0;
                }
            });

            // Monta o caminho completo: Semestre + Caminho Parcial
            // Ex: "2026-1/turmas/Turmas 2026_1_page-0001.jpg"
            const fullPath = `${currentSemester}/${partialPath}`;

            errorMsg.style.display = 'none'; 
            mainImage.style.display = 'block'; 
            mainImage.src = fullPath; 
        }

        function resetDisplay() {
            errorMsg.style.display = 'none';
            mainImage.style.display = 'block';
            mainImage.src = defaultImage;
        }

        mainImage.onerror = function() {
            if (!mainImage.src.includes(defaultImage)) {
                mainImage.style.display = 'none';
                errorMsg.style.display = 'block';
            }
        };

        // Evento de troca de Semestre
        selectSemestre.addEventListener('change', function() {
            updateMenus(this.value);
        });

        // Eventos dos menus de conte√∫do
        contentSelects.forEach(select => {
            select.addEventListener('change', handleSelection);
        });

        // INICIALIZA√á√ÉO: Carrega o semestre padr√£o (2026-1) ao abrir
        updateMenus(selectSemestre.value);

    </script>
</body>
</html>
